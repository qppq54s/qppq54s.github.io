[
  {
    "filename": "data.js",
    "code": "import Node from './node';\nimport Edge from './edge';\n\nconst mockData = {\n  nodes: [\n    {\n      id: '1',\n      label: '张三',\n      left: 600,\n      top: 50,\n      iconType: 'icon-wo',\n      Class: Node,\n      endpoints: [{\n        id: 'right',\n        orientation: [1, 0],\n        pos: [0, 0.5]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }, {\n        id: 'left',\n        orientation: [-1, 0],\n        pos: [0, 0.5]\n      }]\n    },\n    {\n      id: '2',\n      label: '查找联系人',\n      left: 400,\n      top: 50,\n      iconType: 'icon-sousuo',\n      Class: Node,\n      endpoints: [{\n        id: 'right',\n        orientation: [1, 0],\n        pos: [0, 0.5]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '3',\n      label: '查找亲属',\n      left: 600,\n      top: 200,\n      iconType: 'icon-sousuo',\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'right',\n        orientation: [1, 0],\n        pos: [0, 0.5]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '4',\n      label: '查找夫妻',\n      left: 800,\n      top: 50,\n      iconType: 'icon-sousuo',\n      Class: Node,\n      endpoints: [{\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }, {\n        id: 'left',\n        orientation: [-1, 0],\n        pos: [0, 0.5]\n      }]\n    },\n    {\n      id: '5',\n      label: '非日常同房',\n      left: 400,\n      top: 200,\n      iconType: 'icon-xianshang',\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'right',\n        orientation: [1, 0],\n        pos: [0, 0.5]\n      }]\n    },\n    {\n      id: '6',\n      label: '首次入系统',\n      left: 600,\n      top: 350,\n      iconType: 'icon-xianshang',\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom1',\n        orientation: [0, 1],\n        pos: [0.3, 0]\n      }, {\n        id: 'bottom2',\n        orientation: [0, 1],\n        pos: [0.7, 0]\n      }]\n    },\n    {\n      id: '7',\n      label: '非夫妻同房',\n      left: 800,\n      top: 200,\n      iconType: 'icon-xianshang',\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'left',\n        orientation: [-1, 0],\n        pos: [0, 0.5]\n      }]\n    },\n    {\n      id: '8',\n      label: '嫌疑判断',\n      left: 600,\n      top: 500,\n      iconType: 'icon-guanbi',\n      Class: Node,\n      endpoints: [{\n        id: 'left',\n        orientation: [-1, 0],\n        pos: [0, 0.5]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }, {\n        id: 'top1',\n        orientation: [0, -1],\n        pos: [0.3, 0]\n      }, {\n        id: 'top2',\n        orientation: [0, -1],\n        pos: [0.7, 0]\n      }]\n    },\n    {\n      id: '9',\n      label: '在逃人员...',\n      left: 600,\n      top: 650,\n      iconType: 'icon-wo',\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    }\n  ],\n  edges: [\n    {\n      source: 'left',\n      target: 'right',\n      sourceNode: '1',\n      targetNode: '2',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-left',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'right',\n      target: 'left',\n      sourceNode: '1',\n      targetNode: '4',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-right',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'bottom',\n      target: 'top',\n      sourceNode: '1',\n      targetNode: '3',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'bottom',\n      target: 'top',\n      sourceNode: '4',\n      targetNode: '7',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'left',\n      target: 'right',\n      sourceNode: '7',\n      targetNode: '3',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-left',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'bottom',\n      target: 'top',\n      sourceNode: '2',\n      targetNode: '5',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'bottom',\n      target: 'top',\n      sourceNode: '3',\n      targetNode: '6',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'right',\n      target: 'left',\n      sourceNode: '5',\n      targetNode: '8',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.1,\n      Class: Edge\n    },\n    {\n      source: 'bottom',\n      target: 'top',\n      sourceNode: '8',\n      targetNode: '9',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'bottom1',\n      target: 'top1',\n      sourceNode: '6',\n      targetNode: '8',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n    {\n      source: 'bottom2',\n      target: 'top2',\n      sourceNode: '6',\n      targetNode: '8',\n      type: 'endpoint',\n      arrow: true,\n      label: 'rotate-down',\n      arrowPosition: 0.2,\n      Class: Edge\n    },\n  ]\n};\n\nexport default mockData;\n"
  },
  {
    "filename": "edge.js",
    "code": "import $ from 'jquery';\nimport {Edge} from 'butterfly-dag';\n\nclass BaseEdge extends Edge {\n  draw(obj) {\n    let path = super.draw(obj);\n    if (this.options.color) {\n      $(path).addClass(this.options.color);\n    }\n    return path;\n  }\n\n  drawArrow(isShow) {\n    let dom = super.drawArrow(isShow);\n    if (this.options.color) {\n      $(dom).addClass(this.options.color);\n    }\n    return dom;\n  }\n\n  drawLabel(text) {\n    let dom = null;\n    if (text) {\n      dom = $(`<i class=\"newIconfont iconjiandao-tianchong label ${text}\"></i>`)[0];\n    }\n    return dom;\n  }\n}\n\nexport default BaseEdge;\n"
  },
  {
    "filename": "index.jsx",
    "code": "import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Canvas} from 'butterfly-dag';\n\nimport mockData from './data';\n\nimport './index.less';\nimport 'butterfly-dag/dist/index.css';\n\nclass Flow extends React.Component {\n  constructor() {\n    super();\n    this.canvas = null;\n  }\n\n  componentDidMount() {\n    // css里面的类名限制太死了\n    let root = document.getElementById('dag-canvas');\n    this.canvas = new Canvas({\n      root: root,\n      disLinkable: true, // 可删除连线\n      linkable: false,    // 可连线\n      draggable: true,   // 可拖动\n      zoomable: true,    // 可放大\n      moveable: true,    // 可平移\n      theme: {\n        edge: {\n          shapeType: 'AdvancedBezier',\n        }\n      }\n    });\n    this.canvas.draw(mockData);\n  }\n\n  render() {\n    return (\n      <div className='flow-page'>\n        <div className=\"flow-canvas\" id=\"dag-canvas\">\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Flow />, document.getElementById('root'));\n"
  },
  {
    "filename": "index.less",
    "code": "@import 'theme.less'; \n\n\n.flow-page {\n  height: 100%;\n  width: 100%;\n  .flow-canvas {\n    position: relative;\n    height: 100%;\n    width: 100%;\n  }\n  .label {\n    position: absolute;\n    font-size: 20px;\n    background: none;\n    border: none;\n    box-shadow: none;\n    line-height: 23px;\n    color: @butterfly-line-color;\n  }\n  .label:hover {\n    background: none;\n    border: none;\n    color: @butterfly-primary-color;\n  }\n  .rotate-left {\n    transform: rotate(180deg);\n  }\n  .rotate-down {\n    transform: rotate(90deg);\n  }\n  .rotate-right {\n    transform: rotate(0deg);\n  }\n}"
  },
  {
    "filename": "node.js",
    "code": "import $ from 'jquery';\nimport {Node} from 'butterfly-dag';\n\nimport './node.less';\nclass BaseNode extends Node {\n  constructor(opts) {\n    super(opts);\n    this.options = opts;\n  }\n\n  draw = (opts) => {\n    const container = $('<div class=\"flow-base-node\"></div>')\n      .css('top', opts.top)\n      .css('left', opts.left)\n      .attr('id', opts.id);\n\n    const logoContainer = $(`<div class=\"logo-containe\"><i class=\"iconfont ${opts.options.iconType}\"><i/></div>`);\n\n    const content = $('<div class=\"text\"></div>').text(opts.options.label);\n\n    container.append(logoContainer).append(content);\n\n    return container[0];\n  }\n}\n\nexport default BaseNode;\n"
  },
  {
    "filename": "node.less",
    "code": "@import 'theme.less'; \n\n\n.flow-base-node {\n  position: absolute;\n  width: 88px;\n  height: 88px;\n  padding: 5px;\n  padding: 16px 0;\n  background: @butterfly-theme-color;\n  border: @butterfly-box-border;\n  box-shadow: @butterfly-box-shadow;\n  border-radius: 8px;\n  .logo-containe { \n    width: 30px;\n    height: 30px;\n    background:@butterfly-primary-color;\n    line-height: 30px;\n    text-align: center;\n    border-radius: 50%;\n    margin: auto;\n    margin-bottom: 8px;\n    .iconfont {\n      color: @butterfly-overlay-font-color;\n    }\n  }\n  .text {\n    font-size: 12px;\n    color: @butterfly-normal-font-color;\n    text-align: center;\n  }\n}"
  },
  {
    "filename": "package.json",
    "code": "{\n  \"name\": \"flow\",\n  \"cn_name\": \"流程图\",\n  \"description\": \"a dag to display a flow\",\n  \"cn_description\": \"用于展示流程的DAG图\",\n  \"dependencies\": {\n    \"butterfly-dag\": \"*\",\n    \"react\": \"^16.0.0\",\n    \"react-dom\": \"^16.0.0\",\n    \"jquery\": \"*\",\n    \"lodash\": \"*\",\n    \"antd\": \"^3.0.0\"\n  }\n}"
  },
  {
    "filename": "theme.less",
    "code": "@butterfly-theme-color-base:#fff;\n@butterfly-normal-font-color-base:#222;;\n@butterfly-overlay-font-color-base:#FFF;\n@butterfly-primary-color-base:#F66902;\n@butterfly-box-border-color-base: #D9D9D9;\n@butterfly-box-shadow-base:0 2px 3px 0 rgba(0,112,204,0.06);\n@butterfly-box-radius-base:100px;\n@butterfly-line-color-base: #BFBFBF;\n// 主题背景色（画布背景色）\n@butterfly-theme-background-color: @butterfly-theme-color-base;\n// （各图形框）普通情况背景色\n@butterfly-theme-color: fade(@butterfly-theme-color-base,80%);\n// 主题色\n@butterfly-primary-color: @butterfly-primary-color-base;\n// 普通情况下字体颜色\n@butterfly-normal-font-color: @butterfly-normal-font-color-base;\n// 主题背景色上的字体颜色及icon颜色\n@butterfly-overlay-font-color: @butterfly-overlay-font-color-base;\n// 拖动时的背景色\n@butterfly-box-move-background-color: fade(@butterfly-primary-color, 20%);\n// 边框的样式\n@butterfly-box-border: 1px solid @butterfly-box-border-color-base;\n@butterfly-box-shadow: @butterfly-box-shadow-base;\n@butterfly-box-radius: @butterfly-box-radius-base;\n@butterfly-box-node-border-hover: 1px solid @butterfly-primary-color;\n// 线条样式\n@butterfly-line-color: @butterfly-line-color-base;"
  }
]