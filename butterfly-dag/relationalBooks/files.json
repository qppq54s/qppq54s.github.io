[
  {
    "filename": "alis-node.js",
    "code": "import {Node} from 'butterfly-dag';\nimport $ from 'jquery';\n\nclass AlisBaseNode extends Node {\n  constructor(opts) {\n    super(opts);\n    this.options = opts;\n  }\n\n  draw = (opts) => {\n    let className = this.options.type;\n    let container = $('<div class=\"group-node\"></div>')\n      .css('top', opts.top + 'px')\n      .css('left', opts.left + 'px')\n      .addClass(className)\n      .attr('id', opts.id);\n\n    this._createTitle(container);\n    this._createContent(container);\n    this._onRemoveNode(container);\n\n    return container[0];\n  }\n\n  _createTitle = (dom) => {\n    let title = $(\n      `<div class=\"title\">\n        <span id=\"close\"><i class=\"iconfont\">&#xe654;</i></span>\n        <span class=\"title-text\">${this.options.name}</span>\n        <span class=\"alis-node-edit\"><i class=\"iconfont\">&#xe66d;</i></span>\n      </div>`);\n\n    dom.append(title);\n    this._editNode(title);\n  }\n\n  _createContent(dom) {\n    let con = $(`\n      <div class=\"container\" >\n        <p class=\"title-text\">${this.options.data.content}</p>\n        <span class=\"alis-node-edit\"><i class=\"iconfont\">&#xe66d;</i></span>\n      </div>`);\n\n    dom.append(con);\n    this._editNode(con);\n  }\n\n  _onRemoveNode(dom) {\n    $(dom).find('#close').click(function () {\n      dom[0].remove();\n    });\n  }\n\n  _editNode = (dom) => {\n    dom.find('.alis-node-edit').click(function (e) {\n      const oldNode = $(this).prev('.title-text');\n      const oldNodeText = $(this).prev('.title-text').text();\n\n      if (dom[0] === $('.group-node > .title')[0]) {\n        oldNode.html(`<input type=text class=input-text />`);\n        $(oldNode).find('input').focus().val(oldNodeText);\n      } else {\n        oldNode.html(`<textarea></textarea>`);\n        $(oldNode).find('textarea').focus().val(oldNodeText);\n      }\n      oldNode.children().keyup(function (event) {\n        if (event.keyCode === 13 || event.keyCode === 27) {\n          const oldInputText = $(this).val();\n\n          $(this).parent('.title-text').text(oldInputText);\n        }\n      });\n    });\n  }\n}\nexport default AlisBaseNode;\n"
  },
  {
    "filename": "canvas.js",
    "code": "import {Canvas} from 'butterfly-dag';\n\nclass RelationalBooksCanvas extends Canvas {\n  constructor(...args) {\n    super(...args);\n    this.on('InnerEvents', (data) => {\n      if (data.type === 'node:removeEndpoint') {\n        let edges = this.getNeighborEdges(data.data.nodeId);\n        edges.forEach((item) => {\n          item.redraw();\n        });\n      }\n    });\n  }\n}\n\nexport default RelationalBooksCanvas;\n"
  },
  {
    "filename": "data.js",
    "code": "import BaseNode from './node';\nimport AlisBaseNode from './alis-node';\n\nexport default {\n  nodes: [\n    {\n      id: '0',\n      name: 'Book',\n      top: 264,\n      left: 172,\n      data: {\n        content: [\n          {id: '1', content: 'id', sourceNodeId: '2', targetNodeId: '3'},\n          {id: '4', content: 'isbn', sourceNodeId: '5', targetNodeId: '6'},\n          {id: '7', content: 'title', sourceNodeId: '8', targetNodeId: '9'},\n        ],\n      },\n\n      Class: BaseNode,\n    },\n    {\n      id: '1',\n      name: 'BookPublisher',\n      top: 488,\n      left: 374,\n      data: {\n        content: [\n          {\n            id: '10',\n            content: 'book_id',\n            sourceNodeId: '11',\n            targetNodeId: '12',\n          },\n          {\n            id: '13',\n            content: 'publisher_id',\n            sourceNodeId: '14',\n            targetNodeId: '15',\n          },\n        ],\n      },\n\n      Class: BaseNode,\n    },\n    {\n      id: '2',\n      name: 'Author',\n      top: 488,\n      left: 750,\n      data: {\n        content: [\n          {id: '16', content: 'id', sourceNodeId: '17', targetNodeId: '18'},\n          {id: '19', content: 'name', sourceNodeId: '20', targetNodeId: '21'},\n        ],\n      },\n\n      Class: BaseNode,\n    },\n    {\n      id: '3',\n      name: 'BookAuthor',\n      top: 754,\n      left: -36,\n      data: {\n        content: [\n          {\n            id: '22',\n            content: 'book_id',\n            sourceNodeId: '23',\n            targetNodeId: '24',\n          },\n          {\n            id: '25',\n            content: 'author_id',\n            sourceNodeId: '26',\n            targetNodeId: '27',\n          },\n        ],\n      },\n\n      Class: BaseNode,\n    },\n    {\n      id: '4',\n      name: 'Publisher',\n      data: {\n        content: [\n          {id: '28', content: 'id', sourceNodeId: '29', targetNodeId: '30'},\n          {id: '31', content: 'name', sourceNodeId: '32', targetNodeId: '33'},\n        ],\n      },\n      top: 754,\n      left: 374,\n\n      Class: BaseNode,\n    },\n    {\n      id: '5',\n      name: 'Books By Author',\n      data: {\n        content:\n          'SELECT * FROM b INNER JOIN book_author ba ON b.id = ba.book_id GROUP BY ba.author_id',\n      },\n      top: 744,\n      left: 900,\n      Class: AlisBaseNode,\n    },\n  ],\n  edges: [\n    {\n      source: '2',\n      target: '12',\n      sourceNode: '0',\n      targetNode: '1',\n      type: 'endpoint',\n    },\n    {\n      source: '14',\n      target: '18',\n      sourceNode: '1',\n      targetNode: '2',\n      type: 'endpoint',\n    },\n    {\n      source: '23',\n      target: '9',\n      sourceNode: '3',\n      targetNode: '0',\n      type: 'endpoint',\n    },\n    {\n      source: '26',\n      target: '18',\n      sourceNode: '3',\n      targetNode: '2',\n      type: 'endpoint',\n    },\n  ],\n};\n\n"
  },
  {
    "filename": "iconfont.css",
    "code": "@font-face {font-family: \"iconfont\";\n  src: url('iconfont.eot?t=1591864197901'); /* IE9 */\n  src: url('iconfont.eot?t=1591864197901#iefix') format('embedded-opentype'), /* IE6-IE8 */\n  url('data:application/x-font-woff2;charset=utf-8;base64,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') format('woff2'),\n  url('iconfont.woff?t=1591864197901') format('woff'),\n  url('iconfont.ttf?t=1591864197901') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */\n  url('iconfont.svg?t=1591864197901#iconfont') format('svg'); /* iOS 4.1- */\n}\n\n.iconfont {\n  font-family: \"iconfont\" !important;\n  font-size: 16px;\n  font-style: normal;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.icon-shijian:before {\n  content: \"\\e6e1\";\n}\n\n.icon-jiandao:before {\n  content: \"\\e61d\";\n}\n\n.icon-guanlian:before {\n  content: \"\\e68e\";\n}\n\n.icon-xianshang:before {\n  content: \"\\e6a5\";\n}\n\n.icon-ceshi:before {\n  content: \"\\e6ac\";\n}\n\n.icon-kaifa:before {\n  content: \"\\e737\";\n}\n\n.icon-sousuo:before {\n  content: \"\\e63c\";\n}\n\n.icon-tingzhi:before {\n  content: \"\\e6ae\";\n}\n\n.icon-bofang:before {\n  content: \"\\e6af\";\n}\n\n.icon-juxing:before {\n  content: \"\\e776\";\n}\n\n.icon-guize-kai:before {\n  content: \"\\e786\";\n}\n\n.icon-shujuji:before {\n  content: \"\\e6ff\";\n}\n\n.icon-edit:before {\n  content: \"\\e66d\";\n}\n\n.icon-webicon310:before {\n  content: \"\\e6a1\";\n}\n\n.icon-guanbi:before {\n  content: \"\\e654\";\n}\n\n.icon-rds:before {\n  content: \"\\e68b\";\n}\n\n.icon-wo:before {\n  content: \"\\e663\";\n}\n\n.icon-yun:before {\n  content: \"\\e623\";\n}\n\n.icon-yunfuwuqi:before {\n  content: \"\\e624\";\n}\n\n.icon-ehpcdanxinggaoxingnengjisuanE-HPC:before {\n  content: \"\\e8a9\";\n}\n\n.icon-naswenjiancunchuNAS:before {\n  content: \"\\e8b0\";\n}\n\n.icon-ossduixiangcunchuOSS:before {\n  content: \"\\e8b1\";\n}\n\n.icon-slbfuzaijunhengSLB:before {\n  content: \"\\e8b3\";\n}\n\n.icon-vpczhuanyouwangluoVPC:before {\n  content: \"\\e8b4\";\n}\n\n.icon-renyuanguanli:before {\n  content: \"\\e63b\";\n}\n\n"
  },
  {
    "filename": "index.jsx",
    "code": "import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport Canvas from './canvas';\nimport mockData from './data.js';\n\nimport './index.less';\nimport './iconfont.css';\nimport 'butterfly-dag/dist/index.css';\n\nclass RelationalBook extends Component {\n  constructor() {\n    super();\n    this.canvas = null;\n  }\n  componentDidMount() {\n    let root = document.getElementById('dag-canvas');\n    this.canvas = new Canvas({\n      root: root,\n      disLinkable: true, // 可删除连线\n      linkable: true,    // 可连线\n      draggable: true,   // 可拖动\n      zoomable: true,    // 可放大\n      moveable: true,    // 可平移\n      theme: {\n        edge: {\n          shapeType: 'AdvancedBezier',\n        },\n      }\n    });\n    this.canvas.setMinimap(true);\n    this.canvas.draw(mockData, () => {\n      this.canvas.focusCenterWithAnimate();\n    });\n  }\n  render() {\n    return (\n      <div className='relational-books-page'>\n        <div className=\"flow-canvas\" id=\"dag-canvas\">\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<RelationalBook />, document.getElementById('root'));\n"
  },
  {
    "filename": "index.less",
    "code": "@import 'theme.less'; \n.relational-books-page{\n  width: 100%;\n  height: 100%;\n  position: relative;\n  .butterfly-minimap-container {\n    top: 30px;\n    right: 30px !important;\n  }\n  .flow-canvas {\n    width: 100%;\n    height: 100%;\n    .butterflies-link {\n      stroke: @butterfly-line-color;\n      stroke-width: 1px;\n    }\n    .butterfly-wrapper {\n      .relational-book-base-node {\n        width: 200px;\n        position: absolute;\n        height: 32px;\n        line-height: 28px;\n        text-align: center;\n        vertical-align: middle;\n        border-radius: 5px;\n        color: @butterfly-normal-font-color;\n        box-shadow: @butterfly-box-shadow;\n        .title {\n          line-height: 32px;\n          height: 32px;\n          width: 100%;\n          display: flex;\n          justify-content: space-between;\n          background: @butterfly-primary-color;\n          border-radius: 15px 15px 0px 0px;\n          padding: 0 8px;\n          color:@butterfly-overlay-font-color;\n          .remove {\n            cursor: pointer;\n          }\n          .add-node {\n            cursor: pointer;\n          }\n        }\n        .content {\n          height: 32px;\n          width: 200px;\n          // display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 0 8px;\n          background: @butterfly-theme-color;\n          border: @butterfly-box-border;\n          position: relative;\n          cursor: pointer;\n          .targetEndPoint{\n            left: -3px;\n            position: absolute;\n          }\n          .sourceEndPoint{\n            right: -3px;\n            position: absolute;\n          }\n          .remove {\n            display: none;\n            cursor: pointer;\n          }\n          .text {\n            .input-text {\n              height: 28px;\n              border: @butterfly-box-border;\n              width: 130px;\n              padding: 0 4px;\n            }\n          }\n          .edit {\n            display: none;\n            cursor: pointer;\n          }\n        }\n        .content:last-child {\n          border-radius: 0px 0px 15px 15px;\n        }\n        .content:hover {\n          display: flex;\n          background: @butterfly-box-move-background-color;\n          .remove {\n            display : contents;\n            cursor: pointer;\n          }\n          .edit {\n            display : contents;\n            cursor: pointer;\n          }\n        }\n      }\n      .group-node {\n        width: 200px;\n        position: absolute;\n        .title {\n          line-height: 32px;\n          height: 32px;\n          display: flex;\n          justify-content: space-between;\n          background: @butterfly-primary-color;\n          border-radius: 15px 15px 0px 0px;\n          padding: 0 8px;\n          color:@butterfly-overlay-font-color;\n          .title-text {\n            input {\n              width: 140px;\n              color: @butterfly-normal-font-color;\n              height: 28px;\n              border: @butterfly-box-border;\n            }\n          }\n          #close {\n            cursor: pointer;\n          }\n          .alis-node-edit {\n            cursor: pointer;\n          }\n        }\n        .container {\n          display: flex;\n          padding: 8px;\n          justify-content: space-between;\n          border: @butterfly-box-border;\n          background: @butterfly-theme-color;\n          border-radius: 0px 0px 15px 15px;\n          color: @butterfly-normal-font-color;\n          p {\n            textarea {\n              min-height: 80px;\n              width: 164px;\n            }\n          }\n          .alis-node-edit {\n            display: none;\n          }\n        }\n        .container:hover {\n          background: @butterfly-box-move-background-color;\n          .alis-node-edit {\n            cursor: pointer;\n            display: contents;\n          }\n        }\n      }\n    }\n  }\n}"
  },
  {
    "filename": "node.js",
    "code": "import {Node} from 'butterfly-dag';\nimport $ from 'jquery';\n// import '../../static/iconfont.css';\n\nlet getAttrObj = (namedNodeMap) => {\n  return Array.prototype.reduce.call(namedNodeMap, function (pre, item, index, arr) {\n    pre[item.nodeName] = item.value;\n    return pre;\n  }, {});\n};\n\nclass BaseNode extends Node {\n  constructor(opts) {\n    super(opts);\n    this.options = opts;\n    this.childData = opts.data.content;\n  }\n  draw = (opts) => {\n    let className = this.options.type;\n    let container = $('<div class=\"relational-book-base-node base-node\"></div>')\n      .css('top', opts.top + 'px')\n      .css('left', opts.left + 'px')\n      .addClass(className)\n      .attr('id', opts.id);\n\n    this._createTitle(container);\n    this._createChildNode(container);\n\n    return container[0];\n  }\n\n  _createTitle(dom) {\n    let title = $(`\n    <div class='title'>\n      <span class=\"remove\"><i class=\"iconfont\">&#xe654;</i></span>\n      <span>${this.options.name}</span>\n      <span class=\"add-node\"><i class=\"iconfont\">&#xe6a1;</i></span>\n    </div>`);\n\n    dom.append(title);\n    this._onAddNode(title);\n    this._onRemovedNode(title);\n  }\n\n  _createChildNode(dom) {\n    $.each(this.childData, (i, {id, content, sourceNodeId, targetNodeId}) => {\n      dom.append(`\n      <div class=\"content\" data-id=\"${id}\" source-id=\"${sourceNodeId}\" target-id=\"${targetNodeId}\">\n        <div class=\"targetEndPoint butterflie-circle-endpoint\" id=\"${targetNodeId}\"></div>\n        <span class=\"remove\"><i class=\"iconfont\">&#xe654;</i></span>\n        <span class=\"text\">${content}</span>\n        <span class=\"edit\"><i class=\"iconfont\">&#xe66d;</i></span>\n        <div class=\"sourceEndPoint butterflie-circle-endpoint\" id=\"${sourceNodeId}\"></div>\n      </div>`);\n    });\n\n    let childNode = dom.find('.content');\n\n    this._onRemovedNode(childNode);\n    this._onEditNode(childNode);\n  }\n\n  mounted = () => {\n    this.childData.forEach((({sourceNodeId, targetNodeId}) => {\n      this.addEndpoint({\n        id: sourceNodeId,\n        type: 'source',\n        dom: document.getElementById(sourceNodeId)\n      });\n      this.addEndpoint({\n        id: targetNodeId,\n        type: 'target',\n        dom: document.getElementById(targetNodeId)\n      });\n    }));\n  }\n\n  _onRemovedNode(dom) {\n    const _this = this;\n    dom.find('.remove').on('click', function () {\n      const attr = getAttrObj(this.parentNode.attributes);\n      _this.childData = _this.childData.filter(item => item.id !== attr['data-id']);\n      this.parentNode.remove();\n      _this.endpoints.forEach((_point) => {\n        _point.updatePos();\n      });\n      _this.removeEndpoint(attr['source-id']);\n      _this.removeEndpoint(attr['target-id']);\n    });\n  }\n\n  _onEditNode(dom) {\n    dom.find('.edit').click(function () {\n      const oldNode = $(this).prev('.text');\n      const oldNodeText = $(this).prev('.text').text();\n\n      if ($(oldNode.html()).attr('type') !== 'text') {\n        oldNode.html(`<input type=text class=input-text />`);\n        $(oldNode).find('input').focus().val(oldNodeText);\n        oldNode.children().keyup(function (event) {\n          if (event.keyCode === 13 || event.keyCode === 27) {\n            const oldInputText = $(this).val();\n\n            oldNode.text(oldInputText);\n          }\n        });\n      }\n    });\n  }\n\n  _onAddNode(dom) {\n    dom.find('.add-node').click(() => {\n      let code = '';\n      const codeLength = 4;\n      const random = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];\n\n      for (let i = 0; i < codeLength; i++) {\n        const index = Math.floor(Math.random() * 36);\n        code += random[index];\n      }\n      dom.parent('.base-node').append(`\n        <div class=\"content\">\n          <span class='remove'><i class=\"iconfont\">&#xe654;</i></span>\n          <span class=\"text\">${code}</span>\n          <span class=\"edit\"><i class=\"iconfont\">&#xe66d;</i></span>\n        </div>`);\n\n      this._onRemovedNode($('.content'));\n      this._onEditNode($('.content'));\n    });\n  }\n}\nexport default BaseNode;\n"
  },
  {
    "filename": "package.json",
    "code": "{\n  \"name\": \"relational-books\",\n  \"cn_name\": \"书本关系图\",\n  \"description\": \"a dag to show to how to make a relational diagram of Book\",\n  \"cn_description\": \"一个书本关系图\",\n  \"dependencies\": {\n    \"butterfly-dag\": \"*\",\n    \"react\": \"^16.0.0\",\n    \"react-dom\": \"^16.0.0\",\n    \"jquery\": \"*\",\n    \"lodash\": \"*\"\n  }\n}"
  },
  {
    "filename": "theme.less",
    "code": "@butterfly-theme-color-base:#fff;\n@butterfly-normal-font-color-base:#222;;\n@butterfly-overlay-font-color-base:#FFF;\n@butterfly-primary-color-base:#F66902;\n@butterfly-box-border-color-base: #D9D9D9;\n@butterfly-box-shadow-base:0 2px 3px 0 rgba(0,112,204,0.06);\n@butterfly-box-radius-base:100px;\n@butterfly-line-color-base: #BFBFBF;\n// 主题背景色（画布背景色）\n@butterfly-theme-background-color: @butterfly-theme-color-base;\n// （各图形框）普通情况背景色\n@butterfly-theme-color: fade(@butterfly-theme-color-base,80%);\n// 主题色\n@butterfly-primary-color: @butterfly-primary-color-base;\n// 普通情况下字体颜色\n@butterfly-normal-font-color: @butterfly-normal-font-color-base;\n// 主题背景色上的字体颜色及icon颜色\n@butterfly-overlay-font-color: @butterfly-overlay-font-color-base;\n// 拖动时的背景色\n@butterfly-box-move-background-color: fade(@butterfly-primary-color, 20%);\n// 边框的样式\n@butterfly-box-border: 1px solid @butterfly-box-border-color-base;\n@butterfly-box-shadow: @butterfly-box-shadow-base;\n@butterfly-box-radius: @butterfly-box-radius-base;\n@butterfly-box-node-border-hover: 1px solid @butterfly-primary-color;\n// 线条样式\n@butterfly-line-color: @butterfly-line-color-base;"
  }
]