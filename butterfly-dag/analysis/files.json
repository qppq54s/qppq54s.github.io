[
  {
    "filename": "data.js",
    "code": "'use strict';\nimport Node from './node';\nimport Edge from './edge';\n\nconst data = {\n  nodes: [\n    {\n      id: '1',\n      label: 'common..',\n      iconType: 'icon-rds',\n      top: 25,\n      left: 0,\n      Class: Node,\n      endpoints: [{\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '2',\n      label: 'ticket_type',\n      iconType: 'icon-rds',\n      top: 25,\n      left: 300,\n      Class: Node,\n      endpoints: [{\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '3',\n      label: 'status',\n      iconType: 'icon-rds',\n      top: 25,\n      left: 600,\n      Class: Node,\n      endpoints: [{\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '4',\n      label: 'tql_1',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 0,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '5',\n      label: 'tql_2',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 200,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '6',\n      label: 'tql_3',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 400,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '7',\n      label: 'tql_4',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 600,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '8',\n      label: 'tql_5',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 800,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '9',\n      label: 'tql_6',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 1000,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '10',\n      label: 'tql_7',\n      iconType: 'icon-guize-kai',\n      top: 200,\n      left: 1200,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '11',\n      type: 'circle',\n      top: 375,\n      left: 38,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '12',\n      type: 'circle',\n      top: 375,\n      left: 238,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '13',\n      type: 'circle',\n      top: 375,\n      left: 438,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '14',\n      type: 'circle',\n      top: 375,\n      left: 638,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '15',\n      type: 'circle',\n      top: 375,\n      left: 838,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '16',\n      type: 'circle',\n      top: 375,\n      left: 1038,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '17',\n      type: 'circle',\n      top: 375,\n      left: 1238,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }, {\n        id: 'bottom',\n        orientation: [0, 1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '18',\n      label: '职业分布',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 0,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '19',\n      label: 'Echarts',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 200,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '20',\n      label: '国内国际',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 400,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '21',\n      label: '年龄分布',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 600,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '22',\n      label: '性别分布',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 800,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '23',\n      label: '省份分布',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 1000,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n    {\n      id: '24',\n      label: '国家分布',\n      iconType: 'icon-juxing',\n      top: 550,\n      left: 1200,\n      Class: Node,\n      endpoints: [{\n        id: 'top',\n        orientation: [0, -1],\n        pos: [0.5, 0]\n      }]\n    },\n  ],\n  edges: [{\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '4',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '5',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '6',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '7',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '8',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '9',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '1',\n    targetNode: '10',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '2',\n    targetNode: '4',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '3',\n    targetNode: '5',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '3',\n    targetNode: '6',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '3',\n    targetNode: '7',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '3',\n    targetNode: '8',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '3',\n    targetNode: '9',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '3',\n    targetNode: '10',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '4',\n    targetNode: '11',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '5',\n    targetNode: '12',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '6',\n    targetNode: '13',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '7',\n    targetNode: '14',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '8',\n    targetNode: '15',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '9',\n    targetNode: '16',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '10',\n    targetNode: '17',\n    label: 'rotate-down',\n    type: 'endpoint',\n    arrowPosition: 0.9,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '11',\n    targetNode: '18',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '12',\n    targetNode: '19',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '13',\n    targetNode: '20',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '14',\n    targetNode: '21',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '15',\n    targetNode: '22',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '16',\n    targetNode: '23',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  {\n    source: 'bottom',\n    target: 'top',\n    sourceNode: '17',\n    targetNode: '24',\n    arrow: true,\n    type: 'endpoint',\n    arrowPosition: 0.8,\n    Class: Edge\n  },\n  ]\n};\nexport default data;\n"
  },
  {
    "filename": "edge.js",
    "code": "'use strict';\nimport {Edge} from 'butterfly-dag';\nimport $ from 'jquery';\n\nclass BaseEdge extends Edge {\n  draw(obj) {\n    let path = super.draw(obj);\n    if (this.options.color) {\n      $(path).addClass(this.options.color);\n    }\n    return path;\n  }\n  drawArrow(isShow) {\n    let dom = super.drawArrow(isShow);\n    if (this.options.color) {\n      $(dom).addClass(this.options.color);\n    }\n    return dom;\n  }\n  drawLabel(text) {\n    let dom = null;\n    if (text) {\n      dom = $(`<i class=\"newIconfont iconjiandao-tianchong label ${text}\"></i>`)[0];\n    }\n    return dom;\n  }\n}\n\nexport default BaseEdge;\n"
  },
  {
    "filename": "index.jsx",
    "code": "import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport {Canvas, Arrow} from 'butterfly-dag';\n\nimport mockData from './data';\n\nimport './index.less';\nimport 'butterfly-dag/dist/index.css';\nclass Scene4New extends Component {\n  constructor() {\n    super();\n  }\n  componentDidMount() {\n    let root = document.getElementById('dag-canvas');\n    this.canvas = new Canvas({\n      root: root,\n      disLinkable: true, // 可删除连线\n      linkable: true,    // 可连线\n      draggable: true,   // 可拖动\n      zoomable: true,    // 可放大\n      moveable: true,    // 可平移\n      theme: {\n        edge: {\n          // shapeType: 'Straight',\n          // 可以跟下面自定义注册箭头类型对应\n          arrowShapeType: 'arrow1'\n          // labelPosition和labelOffset配合使用\n          // labelPosition: 1,\n          // labelOffset: -20,\n        }\n      }\n    });\n    // 自定义注册箭头，与上面theme.edge.arrowShapeType对应\n    Arrow.registerArrow([{\n      key: 'arrow1',\n      type: 'svg',\n      content: require('butterfly-dag/plugins/arrow/uml-1.svg')\n    }]);\n\n    this.canvas.draw(mockData, () => {\n    });\n\n    this.canvas.on('events', (data) => {\n      // eslint-disable-next-line no-console\n      console.log(data);\n    });\n    this.canvas.setGuideLine(true, {\n      adsorp: {\n        enable: true,\n        gap: 5\n      }\n    })\n  }\n  render() {\n    return (\n      <div className='analysis'>\n        <div className=\"analysis-canvas\" id=\"dag-canvas\">\n        </div>\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<Scene4New />, document.getElementById('root'));\n"
  },
  {
    "filename": "index.less",
    "code": "@import 'theme.less'; \n\n\n.analysis {\n  width: 100%;\n  height: 100%;\n  .analysis-canvas {\n    width: 100%;\n    height: 100%;\n  }\n\n  .label {\n    position: absolute;\n    font-size: 20px;\n    background: none;\n    border: none;\n    box-shadow: none;\n    line-height: 23px;\n    color: @butterfly-line-color;\n  }\n  .label:hover {\n    background: none;\n    border: none;\n    color: @butterfly-primary-color;\n  }\n  .rotate-down {\n    transform: rotate(90deg);\n  }\n}"
  },
  {
    "filename": "node.js",
    "code": "'use strict';\nimport {Node} from 'butterfly-dag';\nimport $ from 'jquery';\nimport './node.less';\nclass BaseNode extends Node {\n  constructor(opts) {\n    super(opts);\n    this.options = opts;\n  }\n\n  draw = (opts) => {\n    if (opts.options.type === 'circle') {\n      const container = $('<div class=\"analysis-circle-base-node\"></div>')\n        .attr('id', opts.id)\n        .css('top', opts.top + 'px')\n        .css('left', opts.left + 'px');\n      const icon = $(`<i class=\"iconfont icon-shujuji\"></i>`);\n\n      container.append(icon);\n\n      return container[0];\n    }\n    const container = $('<div class=\"analysis-base-node\"></div>')\n      .attr('id', opts.id)\n      .css('top', opts.top + 'px')\n      .css('left', opts.left + 'px');\n\n    // this._createTypeIcon(container);\n    this._createText(container);\n\n    return container[0];\n  }\n  _createTypeIcon(dom = this.dom) {\n    const iconContainer = $(`<span class=\"icon-box ${this.options.className}\"></span>`)[0];\n    const icon = $(`<i class=\"iconfont ${this.options.iconType}\"></i>`)[0];\n\n    iconContainer.append(icon);\n    $(dom).append(iconContainer);\n  }\n\n  _createText(dom = this.dom) {\n    $('<span class=\"text-box\"></span>').text(this.options.label).appendTo(dom);\n  }\n}\n\nexport default BaseNode;\n"
  },
  {
    "filename": "node.less",
    "code": "@import 'theme.less'; \n\n\n.analysis-base-node {\n  position: absolute;\n  height: 36px;\n  width: 116;\n  line-height: 36px;\n  text-align: center;\n  background: @butterfly-theme-color;\n  border-radius: 51px;\n  border: @butterfly-box-border;\n  box-shadow: @butterfly-box-shadow;\n  color:@butterfly-normal-font-color;\n  .icon-box {\n    display: inline-block;\n    height: 30px;\n    line-height: 30px;\n    width: 30px;\n    border-radius: @butterfly-box-radius;\n    position: relative;\n    left: 2px;\n    .iconfont {\n      color: @butterfly-overlay-font-color;\n    }\n  }\n  .text-box {\n    display: inline-block;\n    height: 30px;\n    width: 86px;\n    padding: 0 10px;\n    line-height: 30px;\n    font-size: 12px;\n  }\n}\n.analysis-circle-base-node {\n  position: absolute;\n  background: @butterfly-theme-color;\n  border: @butterfly-box-border;\n  box-shadow: @butterfly-box-shadow;\n  color: @butterfly-normal-font-color;\n  width: 42px;\n  height: 42px;\n  border-radius: @butterfly-box-radius;\n  line-height: 42px;\n  text-align: center;\n}"
  },
  {
    "filename": "package.json",
    "code": "{\n  \"name\": \"sql analysis\",\n  \"cn_name\": \"SQL分析模板\",\n  \"description\": \"a sql analysis dag, to show the relation between sql\",\n  \"cn_description\": \"用图形表示不同SQL之间，变量的分析模板\",\n  \"dependencies\": {\n    \"butterfly-dag\": \"*\",\n    \"react\": \"^16.0.0\",\n    \"react-dom\": \"^16.0.0\",\n    \"jquery\": \"*\",\n    \"lodash\": \"*\"\n  }\n}"
  },
  {
    "filename": "theme.less",
    "code": "@butterfly-theme-color-base:#fff;\n@butterfly-normal-font-color-base:#222;;\n@butterfly-overlay-font-color-base:#FFF;\n@butterfly-primary-color-base:#F66902;\n@butterfly-box-border-color-base: #D9D9D9;\n@butterfly-box-shadow-base:0 2px 3px 0 rgba(0,112,204,0.06);\n@butterfly-box-radius-base:100px;\n@butterfly-line-color-base: #BFBFBF;\n// 主题背景色（画布背景色）\n@butterfly-theme-background-color: @butterfly-theme-color-base;\n// （各图形框）普通情况背景色\n@butterfly-theme-color: fade(@butterfly-theme-color-base,80%);\n// 主题色\n@butterfly-primary-color: @butterfly-primary-color-base;\n// 普通情况下字体颜色\n@butterfly-normal-font-color: @butterfly-normal-font-color-base;\n// 主题背景色上的字体颜色及icon颜色\n@butterfly-overlay-font-color: @butterfly-overlay-font-color-base;\n// 拖动时的背景色\n@butterfly-box-move-background-color: fade(@butterfly-primary-color, 20%);\n// 边框的样式\n@butterfly-box-border: 1px solid @butterfly-box-border-color-base;\n@butterfly-box-shadow: @butterfly-box-shadow-base;\n@butterfly-box-radius: @butterfly-box-radius-base;\n@butterfly-box-node-border-hover: 1px solid @butterfly-primary-color;\n// 线条样式\n@butterfly-line-color: @butterfly-line-color-base;"
  }
]